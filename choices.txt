0) github actions: integration with github , can use oidc for auth, clear documentation 
1) use Workload Identity Federation instead of service account keys to access Google Cloud resources with terraform - use direct access
reason: 
a) However, service account keys are powerful credentials, and can present a security risk , WIF provide an OIDC token.
Benefits of using OIDC

b) By updating your workflows to use OIDC tokens, you can adopt the following good security practices:
1)No cloud secrets: You won't need to duplicate your cloud credentials as long-lived GitHub secrets. Instead, you can configure the OIDC trust on your cloud provider, and then update your workflows to request a short-lived access token from the cloud provider through OIDC.
2)Authentication and authorization management: You have more granular control over how workflows can use credentials, using your cloud provider's authentication (authN) and authorization (authZ) tools to control access to cloud resources.
3)Rotating credentials: With OIDC, your cloud provider issues a short-lived access token that is only valid for a single job, and then automatically expires.
4)we can restrict the pool for only one workflow


2)cloud storage for state file
reason: centeraliized , regional for cost , enable versioning

3) region: i select all resources to be in the same region for fast connectivity (performance)

4) cloud storage
    assets: STANDARD as this bucket will be accessed frequently
    logging: NEARLINE as this bucket will be accessed rarely as it  audit/compliance 

5) cloud run
a) min scale instances is 0 on dev and test env to reduce cost but it is 1 on prod and stage to prevent cold start
b) we use lifecycle block on cloud run to ignore changes on image and traffic to control it with cicd pipeline to achieve Rolling updates or blue-green deployment staratigy
c) i used blue-green deployment staratigy on the app deploy but we can use rolling update using traffic splitting as we can Start with 10% to the new revision Then, after monitoring metrics/logs â†’ increase the percentage gradually on another jobs


cost:
1) storage bucket for state file
2) storage bucket(assets-logging) for all environment
3) cloud run service


least previlige:
1) terraform pipeline serviceAccount have editor role,cloud run admin role(for enable public access)
2) cicd roles
roles/artifactregistry.writer (push images) .
roles/run.developer allows updating/deploying Cloud Run services.
roles/iam.serviceAccountUser to be able to run as a cloud run serviceAccount
3) cloud run serviceAccount has only objectCreator to assets bucket


steps:
1) create repo on artifact registry for the image with name simple-web-app
2) create wif for cicd with the least previlige permission